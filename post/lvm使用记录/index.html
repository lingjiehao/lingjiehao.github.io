<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.gstatic.com><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css integrity=sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:wght@400;600&display=swap" rel=stylesheet><title>LVM使用记录</title><link rel=stylesheet href=/css/stylesheet.css></head><body><div class=container-fluid><nav class="navbar navbar-expand-md navbar-light"><span class="navbar-brand mb-0 h1"></span><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNavAltMarkup aria-controls=navbarNav aria-expanded=false aria-label="Toggle Navigation" name=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavAltMarkup><div class=navbar-nav><a class="nav-item nav-link" href=/>Home</a>
<a class="nav-item nav-link" href=/post/>Posts</a>
<a class="nav-item nav-link" href=/about/>About</a></div></div></nav><section id=page-title><h1><a href=/>My New Hugo Site</a></h1><span id=author-name><h6><a href=/about/></a></h6></span></section><div class=blog-post><h1>LVM使用记录</h1><div class=blog-post-subheader><time>02 Apr 2021</time></div><div class=blog-post-content><h1 id=在新的硬盘分区上使用lvm>在新的硬盘/分区上使用lvm</h1><hr><h2 id=创建新分区>创建新分区</h2><pre><code># 创建sda1
fdisk /dev/sda
g
n
...
w
</code></pre><h2 id=创建pv>创建PV</h2><pre><code>pvcreate /dev/sda1
</code></pre><h2 id=创建vg>创建VG</h2><pre><code># vg1为VG的名称, sda1为之前创建好的PV
vgcreate vg1 /dev/sda1

# 同时添加多块硬盘
vgcreate vg1 /dev/sda1 /dev/sdb1
</code></pre><h2 id=创建lv>创建LV</h2><pre><code># 创建大小为10G, 名为test1的LV
# vg1为之前创建的VG名称

lvcreate -L 10G -n &quot;test1&quot; vg1
</code></pre><p>这一步完成后, 会创建一个新的硬盘<code>/dev/vg1/test1</code></p><h2 id=格式化新创建的硬盘>格式化新创建的硬盘</h2><pre><code>mkfs.ext4 /dev/vg1/test1
</code></pre><h1 id=lv扩容>LV扩容</h1><hr><pre><code># 为/dev/vg1/test1新增20GB空间
lvextend -L +20G vg1/test1

# 重载逻辑卷大小
resize2fs -p /dev/vg1/test1
</code></pre><h1 id=vg扩容>VG扩容</h1><hr><pre><code># 向vg1中添加新的PV:/dev/sdc1
vgextend vg1 /dev/sdc1
</code></pre></div></div><footer><hr><small>&copy; 2021 .
Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> using the <a href=https://github.com/arjunkrishnababu96/basics target=_blank>Basics</a> theme.</small></footer></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js integrity=sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T crossorigin=anonymous></script></body></html>